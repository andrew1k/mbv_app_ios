import{ap as T,s as R,o as f,i as K,u as a,c as v,aq as X,a4 as P,a as e,w as l,f as D,aj as U,ar as A,t as M,a9 as O,x as C,h as n,as as Y,F as Q,r as c,a3 as g,m as G,ae as w,T as N,a8 as r,a5 as H,V as o,a1 as Z,d as I}from"./index-fc3fba16.js";import{u as ee,a as F,c as J,b as le,d as ae}from"./index.esm-632ca3bc.js";import{V as L}from"./VForm-21db8aa9.js";import{V as te}from"./VCheckbox-997bc3e0.js";const se={__name:"AccountSettings",setup(S){const i=T(),{dbUser:d}=R(i),{appUpdateUserData:b}=i,{handleSubmit:y,isSubmitting:V}=ee(),{value:p,errorMessage:_,handleBlur:q}=F("firstName",J().min(2).required("Это поле обязательно").max(32),{validateOnValueUpdate:!0,initialValue:d.value.firstName}),{value:m,errorMessage:h,handleBlur:$}=F("secondName",J().min(2).required("Это поле обязательно").max(32),{validateOnValueUpdate:!0,initialValue:d.value.secondName}),{value:E,errorMessage:B,handleBlur:z}=F("phoneNumber",le().required("Это поле обязательно"),{validateOnValueUpdate:!0,initialValue:d.value.phoneNumber}),{value:t,errorMessage:s,handleBlur:u}=F("birthDate",ae().required("Это поле обязательно"),{validateOnValueUpdate:!0,initialValue:d.value.birthDate}),W=y(async j=>{await b({...j})});return(j,x)=>(f(),K(Q,null,[a(V)?(f(),v(X,{key:0,indeterminate:""})):P("",!0),e(L,{onSubmit:Y(a(W),["prevent"])},{default:l(()=>[e(D,null,{default:l(()=>[e(U,{label:"Ваше имя",modelValue:a(p),"onUpdate:modelValue":x[0]||(x[0]=k=>A(p)?p.value=k:null),"error-messages":a(_),onBlur:a(q)},null,8,["modelValue","error-messages","onBlur"]),e(U,{label:"Ваша фамилия",modelValue:a(m),"onUpdate:modelValue":x[1]||(x[1]=k=>A(m)?m.value=k:null),"error-messages":a(h),onBlur:a($)},null,8,["modelValue","error-messages","onBlur"]),e(U,{label:"Дата рождения",type:"date",modelValue:a(t),"onUpdate:modelValue":x[2]||(x[2]=k=>A(t)?t.value=k:null),"error-messages":a(s),onBlur:a(u)},null,8,["modelValue","error-messages","onBlur"]),e(U,{label:"Ваш номер телефона",modelValue:a(E),"onUpdate:modelValue":x[3]||(x[3]=k=>A(E)?E.value=k:null),prefix:"+7",counter:"10","error-messages":a(B),onBlur:a(z)},null,8,["modelValue","error-messages","onBlur"])]),_:1}),e(M,{class:"my-2"},{default:l(()=>[e(O),e(C,{type:"submit"},{default:l(()=>[n("Сохранить")]),_:1})]),_:1})]),_:1},8,["onSubmit"])],64))}},oe={__name:"AuthSettings",setup(S){const i=T(),{email:d}=R(i),{appUpdateEmail:b,appUpdatePassword:y,appDeleteAcc:V}=i,p=c(""),_=c(!0),q=[t=>!!t||"Поле Email обязательно",t=>/.+@.+\..+/.test(t)||"Введите правильный Email",t=>t&&t.length<=32||"Поле email не может содержать больше 32 символов"],m=c(""),h=c(!0),$=c(""),E=[t=>!!t||"Поле Email обязательно",t=>t&&t.length<=32||"Поле для пароля не может содержать больше 32 символов",t=>t&&t.length>=6||"Пароль должен иметь не менее 6 символов"],B=c(!1),z=c(!1);return(t,s)=>(f(),K(Q,null,[e(g,null,{default:l(()=>[n(" Изменить email ")]),_:1}),e(D,null,{default:l(()=>[e(L,{ref_key:"changeEmail",ref:p,modelValue:_.value,"onUpdate:modelValue":s[1]||(s[1]=u=>_.value=u),"lazy-validation":"","validate-on":"blur"},{default:l(()=>[e(U,{modelValue:a(d),"onUpdate:modelValue":s[0]||(s[0]=u=>A(d)?d.value=u:null),rules:q,label:"Введите новый email",variant:"outlined",type:"email",required:"",class:"my-3","hide-details":""},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(M,null,{default:l(()=>[e(O),e(C,{onClick:s[2]||(s[2]=u=>a(b)(a(d))),disabled:!_.value},{default:l(()=>[n("Обновить email ")]),_:1},8,["disabled"])]),_:1}),e(G),e(g,null,{default:l(()=>[n(" Обновить пароль ")]),_:1}),e(D,null,{default:l(()=>[e(L,{ref_key:"changePassword",ref:m,modelValue:h.value,"onUpdate:modelValue":s[5]||(s[5]=u=>h.value=u),"lazy-validation":""},{default:l(()=>[e(U,{modelValue:$.value,"onUpdate:modelValue":s[3]||(s[3]=u=>$.value=u),rules:E,label:"Новый пароль",variant:"outlined","append-inner-icon":B.value?"mdi-eye-off":"mdi-eye",type:B.value?"text":"password","onClick:appendInner":s[4]||(s[4]=u=>B.value=!B.value),class:"my-3","hide-details":""},null,8,["modelValue","append-inner-icon","type"])]),_:1},8,["modelValue"])]),_:1}),e(M,null,{default:l(()=>[e(O),e(C,{onClick:s[6]||(s[6]=u=>a(y)($.value)),disabled:!h.value},{default:l(()=>[n(" Обновить пароль ")]),_:1},8,["disabled"])]),_:1}),e(G),e(g,null,{default:l(()=>[n(" Удалить аккаунт ")]),_:1}),e(M,null,{default:l(()=>[e(te,{modelValue:z.value,"onUpdate:modelValue":s[7]||(s[7]=u=>z.value=u),label:"Я действительно хочу удалить аккаунт","hide-details":""},null,8,["modelValue"])]),_:1}),e(M,null,{default:l(()=>[e(O),e(C,{disabled:!z.value,color:"error",onClick:a(V)},{default:l(()=>[n("Удалить аккаунт")]),_:1},8,["disabled","onClick"])]),_:1})],64))}},ne={class:"mx-auto my-1 pa-0 font-weight-bold"},ue={__name:"ProfileView",setup(S){const i=()=>{alert("coming soon")},d=T(),{dbUser:b,email:y}=R(d);return(V,p)=>(f(),v(o,{class:"ma-2 d-flex flex-column",elevation:"0"},{default:l(()=>[e(w,{color:"background",size:"90",class:"mx-auto mt-2",onClick:i},{default:l(()=>[e(N,{size:"40",icon:"mdi-account"})]),_:1}),r("h2",ne,H(a(b).firstName+" "+a(b).secondName),1),e(D,{class:"text-mono pa-0 mb-3 mx-auto"},{default:l(()=>[n(H(a(y)),1)]),_:1})]),_:1}))}},re={__name:"LogoutBtn",setup(S){const{appLogout:i}=T();return(d,b)=>(f(),v(C,{block:"",size:"large","append-icon":"mdi-logout",onClick:a(i)},{default:l(()=>[n(" Выйти ")]),_:1},8,["onClick"]))}},de={},ie=r("b",null,"Уставные документы Церкви Миссия Благая Весть:",-1),me=r("br",null,null,-1),ce=r("a",{href:"https://mbv.spb.ru/wp-content/uploads/2020/01/Osnovy-veroucheniya-MBV.pdf"},"Основы вероучения Церкви Миссия Благая Весть",-1),fe=r("br",null,null,-1),pe=r("a",{href:"https://mbv.spb.ru/wp-content/uploads/2020/01/USTAV-MRO-Missiya-.pdf"},"Устав Церкви Миссия Благая Весть",-1),_e=r("br",null,null,-1),ve=r("b",null,"Служебные документы:",-1),be=r("br",null,null,-1),Ve=r("a",{href:"https://mbv.spb.ru/wp-content/uploads/2020/01/Politika-obrabotke-per.dannyh-MBV.pdf"},"Политика по обработке персональных данных",-1),he=r("br",null,null,-1),xe=r("a",{href:"https://mbv.spb.ru/wp-content/uploads/2020/01/Polozhenie-ob-obrabotke-per.dannyh-MBV.pdf"},"Положение об обработке персональных данных",-1),ge=r("br",null,null,-1),ye=r("a",{href:"https://mbv.spb.ru/wp-content/uploads/2020/01/Svidetelstvo-INN-Missiya-.jpg"},"Свидетельство ИНН",-1);function ke(S,i){return f(),v(D,null,{default:l(()=>[ie,n(),me,ce,fe,pe,_e,ve,n(),be,Ve,he,xe,ge,ye]),_:1})}const Be=Z(de,[["render",ke]]),Se={__name:"ProfilePage",setup(S){const i=T(),{dbUser:d,email:b,isAdmin:y}=R(i);c("auth");const V=c(!1),p=c(!1),_=c(!1);return(q,m)=>(f(),v(o,{rounded:"0",variant:"text"},{default:l(()=>[e(ue),a(y)?(f(),v(o,{key:0,class:"mx-2 mt-4",to:"/admin"},{default:l(()=>[e(C,{size:"large",block:""},{default:l(()=>[n("Admin")]),_:1})]),_:1})):P("",!0),e(o,{class:"mx-2 mt-4"},{default:l(()=>[e(o,{class:"d-flex",onClick:m[0]||(m[0]=h=>V.value=!V.value)},{default:l(()=>[e(w,{class:"ml-3 my-2",variant:"outlined"},{default:l(()=>[e(N,{size:"x-large",icon:"mdi-cog"})]),_:1}),e(g,{class:"my-1"},{default:l(()=>[n(" Настройки профиля ")]),_:1})]),_:1}),e(I,null,{default:l(()=>[V.value?(f(),v(o,{key:0,rounded:"0",class:"mx-2"},{default:l(()=>[e(se)]),_:1})):P("",!0)]),_:1})]),_:1}),e(o,{class:"mx-2 mt-4"},{default:l(()=>[e(o,{class:"d-flex",onClick:m[1]||(m[1]=h=>p.value=!p.value)},{default:l(()=>[e(w,{class:"ml-3 my-2",variant:"outlined"},{default:l(()=>[e(N,{size:"x-large",icon:"mdi-shield-lock-outline"})]),_:1}),e(g,{class:"my-1"},{default:l(()=>[n(" Настройки авторизации ")]),_:1})]),_:1}),e(I,null,{default:l(()=>[p.value?(f(),v(o,{key:0,rounded:"0",class:"mx-2"},{default:l(()=>[e(oe)]),_:1})):P("",!0)]),_:1})]),_:1}),e(o,{class:"mx-2 mt-4",to:"/profile/notes"},{default:l(()=>[e(o,{class:"d-flex"},{default:l(()=>[e(w,{class:"ml-3 my-2",variant:"outlined"},{default:l(()=>[e(N,{size:"x-large",icon:"mdi-arrow-down"})]),_:1}),e(g,{class:"my-1"},{default:l(()=>[n(" Сохранения ")]),_:1})]),_:1})]),_:1}),e(o,{class:"mx-2 mt-4"},{default:l(()=>[e(o,{class:"d-flex"},{default:l(()=>[e(w,{class:"ml-3 my-2",variant:"outlined"},{default:l(()=>[e(N,{size:"x-large",icon:"mdi-theme-light-dark"})]),_:1}),e(g,{class:"my-1"},{default:l(()=>[n(" Тема оформления ")]),_:1})]),_:1})]),_:1}),e(o,{class:"mx-2 mt-4"},{default:l(()=>[e(o,{class:"d-flex",onClick:m[2]||(m[2]=h=>_.value=!_.value)},{default:l(()=>[e(w,{class:"ml-3 my-2",variant:"outlined"},{default:l(()=>[e(N,{size:"x-large",icon:"mdi-file-document-outline"})]),_:1}),e(g,{class:"my-1"},{default:l(()=>[n(" Документы ")]),_:1})]),_:1}),e(I,null,{default:l(()=>[_.value?(f(),v(o,{key:0,rounded:"0",class:"mx-2"},{default:l(()=>[e(Be)]),_:1})):P("",!0)]),_:1})]),_:1}),e(o,{class:"mx-2 mt-4"},{default:l(()=>[e(re)]),_:1})]),_:1}))}};export{Se as default};
