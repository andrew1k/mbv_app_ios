import{r as w,ah as $,o as V,i as x,a as e,aj as k,w as a,a8 as h,x as _,h as n,a5 as v,bd as N,F as c,j as T,q as C,s as D,c as F,V as g,al as G,ak as i,a3 as B,u as r}from"./index-a1372ae8.js";import{a as S,V as m}from"./VTabs-3486781f.js";const U=["colspan"],q=["href"],f={__name:"FormsAnswersTable",props:{tableHeader:{required:!0,type:Array},formsData:{required:!0,type:Array}},setup(y){const p=w();return(u,o)=>{const d=$("VDataTable");return V(),x(c,null,[e(k,{"prepend-inner-icon":"mdi-magnify",modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=l=>p.value=l),label:"Поиск",variant:"outlined",class:"ma-2"},null,8,["modelValue"]),e(d,{density:"compact","items-per-page":"100","group-by":[{key:"from"}],"fixed-header":"",headers:y.tableHeader,items:y.formsData,search:p.value,height:"400","sort-by":[{key:"time",order:"desc"}]},{"group-header":a(({item:l,columns:b,toggleGroup:t,isGroupOpen:s})=>[h("tr",null,[h("td",{colspan:b.length},[e(_,{size:"small",variant:"text","prepend-icon":s(l)?"$expand":"$next",onClick:A=>t(l)},{default:a(()=>[n(v(l.value),1)]),_:2},1032,["prepend-icon","onClick"])],8,U)])]),"item.time":a(({item:l})=>[n(v(new Date(+l.raw.time).toLocaleDateString()),1)]),"item.fullName":a(({item:l})=>[e(N,{to:{name:"User",params:{id:l.raw.uid}}},{default:a(()=>[n(v(l.raw.fullName)+" "+v(l.raw.age),1)]),_:2},1032,["to"])]),"item.phoneNumber":a(({item:l})=>[h("a",{href:`+7${l.raw.phoneNumber}`},v(`+7${l.raw.phoneNumber}`),9,q)]),"item.answer":a(({item:l})=>[h("ul",null,[(V(!0),x(c,null,T(JSON.parse(l.raw.answer),b=>(V(),x("li",null,v(b),1))),256))])]),_:1},8,["headers","items","search"])],64)}}},z={__name:"FormReviewer",setup(y){const p=C(),{getForms:u}=p,{formsData:o}=D(p),d=w([{title:"Время",key:"time"},{title:"Имя",key:"fullName"},{title:"Телефон",key:"phoneNumber"},{title:"Ответ",key:"answer"}]),l=w("start");return(b,t)=>(V(),F(g,{rounded:"0",variant:"text"},{default:a(()=>[e(_,{onClick:t[0]||(t[0]=s=>b.$router.back()),variant:"text",size:"x-large","prepend-icon":"mdi-chevron-left"},{default:a(()=>[n("Назад")]),_:1}),e(g,{class:"ma-2"},{default:a(()=>[e(S,{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=s=>l.value=s)},{default:a(()=>[e(m,{value:"start",variant:"text",rounded:"0"},{default:a(()=>[n("Начало")]),_:1}),e(m,{value:"forms",variant:"text",rounded:"0"},{default:a(()=>[n("Формы")]),_:1}),e(m,{value:"fellowship",variant:"text",rounded:"0"},{default:a(()=>[n("Общение")]),_:1}),e(m,{value:"discipleship",variant:"text",rounded:"0"},{default:a(()=>[n("Ученичество")]),_:1}),e(m,{value:"ministry",variant:"text",rounded:"0"},{default:a(()=>[n("Служение")]),_:1}),e(m,{value:"evangelism",variant:"text",rounded:"0"},{default:a(()=>[n("Благовестие")]),_:1}),e(m,{value:"counseling",variant:"text",rounded:"0"},{default:a(()=>[n("Консультация")]),_:1}),e(m,{value:"prayer",variant:"text",rounded:"0"},{default:a(()=>[n("Молитва")]),_:1})]),_:1},8,["modelValue"]),e(G,{modelValue:l.value,"onUpdate:modelValue":t[9]||(t[9]=s=>l.value=s),touch:!1},{default:a(()=>[e(i,{value:"start"},{default:a(()=>[e(B,null,{default:a(()=>[n("Таблицы заполненных форм")]),_:1})]),_:1}),e(i,{value:"forms","onGroup:selected":t[2]||(t[2]=s=>r(u)("forms"))},{default:a(()=>[e(f,{"table-header":d.value,"forms-data":r(o).forms},null,8,["table-header","forms-data"])]),_:1}),e(i,{value:"fellowship","onGroup:selected":t[3]||(t[3]=s=>r(u)("fellowship"))},{default:a(()=>[e(f,{"table-header":d.value,"forms-data":r(o).fellowship},null,8,["table-header","forms-data"])]),_:1}),e(i,{value:"discipleship","onGroup:selected":t[4]||(t[4]=s=>r(u)("discipleship"))},{default:a(()=>[e(f,{"table-header":d.value,"forms-data":r(o).discipleship},null,8,["table-header","forms-data"])]),_:1}),e(i,{value:"ministry","onGroup:selected":t[5]||(t[5]=s=>r(u)("ministry"))},{default:a(()=>[e(f,{"table-header":d.value,"forms-data":r(o).ministry},null,8,["table-header","forms-data"])]),_:1}),e(i,{value:"evangelism","onGroup:selected":t[6]||(t[6]=s=>r(u)("evangelism"))},{default:a(()=>[e(f,{"table-header":d.value,"forms-data":r(o).evangelism},null,8,["table-header","forms-data"])]),_:1}),e(i,{value:"counseling","onGroup:selected":t[7]||(t[7]=s=>r(u)("counseling"))},{default:a(()=>[e(f,{"table-header":d.value,"forms-data":r(o).counseling},null,8,["table-header","forms-data"])]),_:1}),e(i,{value:"prayer","onGroup:selected":t[8]||(t[8]=s=>r(u)("prayer"))},{default:a(()=>[e(f,{"table-header":d.value,"forms-data":r(o).prayer},null,8,["table-header","forms-data"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}};export{z as default};
